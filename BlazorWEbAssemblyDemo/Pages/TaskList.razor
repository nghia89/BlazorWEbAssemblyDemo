@page "/TaskList"

<h3>Task List</h3>

@if (Tasks == null)
{
        <Loading />
 }
else
{
<div class="row">
    <EditForm Model="@TaskListSearch" OnSubmit=@SearchTask>
        <div class="row">
            <div class="col">
                <label>Name</label>
                <InputText class="form-control" @bind-Value="TaskListSearch.Name"></InputText>
            </div>

            <div class="col">
                <label>Assignee</label>
                <InputSelect class="form-control" @bind-Value="TaskListSearch.AssigneeId">
                    <option value="">--Select--</option>
                    @foreach (var assignee in Assignees)
                        {
                        <option value="@assignee.Id">@assignee.FullName</option>
                        }
                </InputSelect>
            </div>

            <div class="col">
                <label>Priority</label>
                <InputSelect class="form-control" @bind-Value="TaskListSearch.Priority">
                    <option value="">--Select--</option>
                    @foreach (string item in Enum.GetNames(typeof(Priority)))
                        {
                        <option value="@item">@item</option>
                        }
                </InputSelect>
            </div>

            <div class="col button-top">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
            <div class="col button-top">
                <a href="/taskCreate" class="btn btn-success">Create</a>
            </div>
        </div>
    </EditForm>
</div>

                <div class="row mt-4">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    Name
                                </th>
                                <th>
                                    Priority
                                </th>
                                <th>Assignee</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Tasks)
                            {
            <tr>
                <td>@item.Name</td>
                <td>@item.Priority</td>
                <td><a style="cursor:pointer;">@item.AssigneeName</a></td>
                <td>@item.CreatedDate.ToString("dd/MM/yyy hh:mm")</td>
                <td>@item.Status</td>
                <td>
                    <a href="/taskDetail/@item.Id" class="btn btn-primary">Detail</a>
                    <a href="/taskEdit/@item.Id" class="btn btn-warning">Edit</a>
                    <button class="btn btn-danger">Delete</button>

                </td>
            </tr>}

                        </tbody>
                        <tfoot>
                            @*<Pagination MetaData="MetaData" Spread="2" SelectedPage="SelectedPage"></Pagination>*@
                        </tfoot>
                    </table>
                </div>}
